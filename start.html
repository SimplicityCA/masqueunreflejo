<!DOCTYPE html>
<html lang="en" ng-app="confusionApp">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>M&aacute;s Que Un Reflejo</title>    
        <!-- Bootstrap -->
<!-- build:css styles/main.css -->
    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="node_modules/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="dist/styles/master.css" rel="stylesheet">
    
<!-- endbuild -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="container">
        <div class="row">
        	<div class="header col-xs-12">
              	<img src="assets/mas-que-un-reflejo.png" alt="mas que un reflejo" class="img"/>
            </div>
        </div>
        <div class="row">
            <div id="canvas-content" class="canvas-content col-xs-12">
<!--             	<canvas id="picture" style="border:1px solid #000000;" class="col-xs-6 col-xs-offset-3">
                    Your browser does not support the HTML5 canvas tag.
                </canvas> -->
                <div class="col-xs-12 col-sm-6 col-sm-offset-3 button-container">
                    <!-- <a class="btn btn-success btn-lg btn-block" href="#">Subir Foto</a> -->
                    <a id="next" class="btn btn-primary btn-common btn-lg btn-block" href="#">Comenzar</a>
                </div>
            </div>
        
            <div id="efect-content" class="efect-content col-xs-12" style="display:none;">
                <div class="col-sm-10 col-xs-12 col-md-push-2">
                    <div class="col-sm-6 canvas-container">
                        <input type="file" id="file-input">
                    </div>
                    <canvas id="image" style="border:1px solid #000000;"  width="600" height="280" class=" col-xs-12 col-sm-8 col-sm-offset-2">
                        Your browser does not support the HTML5 canvas tag.
                    </canvas>
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 button-container">
                        <section id="colorSwatch">
                            <input type="radio" name="color" id="color01" data-color="gold" checked><label for="color01"></label> 
                            <input type="radio" name="color" id="color02" data-color="darkorange">  <label for="color02"></label>  
                            <input type="radio" name="color" id="color03" data-color="navy">        <label for="color03"></label>  
                            <input type="radio" name="color" id="color04" data-color="yellowgreen"> <label for="color04"></label>  
                            <input type="radio" name="color" id="color05" data-color="firebrick">   <label for="color05"></label>  
                            <input type="radio" name="color" id="color06" data-color="powderblue">  <label for="color06"></label> 
                        </section>
                        <div class="col-sm-6">
                            <a  class="btn btn-primary btn-common btn-lg btn-block" onclick="rotate()" href="#">Rotar</a>
                        </div>
                        <div class="col-sm-6">
                            <a class="btn btn-primary btn-lg btn-block"  onclick="postCanvasToFacebook()" >Compartir en fb</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-xs-12 efects-container col-md-pull-10 ">
                    <a class="btn btn-success btn-lg btn-block" href="#">Efecto 1</a>
                    <a class="btn btn-info btn-lg btn-block" href="#">Efecto 2</a>
                     <a class="btn btn-warning btn-lg btn-block" href="#">Efecto 3</a>
                     <a class="btn btn-danger btn-lg btn-block" href="#">Efecto 4</a>
                </div>
                
                
                
            </div>
        </div>
    </div>
    <footer class="footer">
	      <div class="container">
	        <img src="assets/footer-pratonato-san-jose.png" alt="mas que un reflejo" class="img"/>
	      </div>
	    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- build:js scripts/main.js -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- endbuild -->
    <script src="js/pubnub-3.15.2.min.js"></script>

    <script src="js/drawcanvas.js"></script> 
    <script src="js/load-image.js"></script>
    <script src="js/load-image-scale.js"></script>
    <script src="js/load-image-meta.js"></script>
    <script src="js/load-image-fetch.js"></script>
    <script src="js/load-image-exif.js"></script>
    <script src="js/load-image-exif-map.js"></script>
    <script src="js/load-image-orientation.js"></script>
    <script src="js/vendor/jquery.Jcrop.js"></script>
    <script src="js/app.js"></script>
    <script src="js/facebook.js"></script>
    <script src="js/base64binary.js"></script>
    <script>
        $(document).ready(function(){
            $("#next").on("click",function(){
                $("#canvas-content").hide();
                $("#efect-content").show();
            })
            $("#back").on("click",function(){
                $("#canvas-content").show();
                $("#efect-content").hide();
            })
        })
        function rotate () {
            var canvas = document.getElementById("image");
            var context = canvas.getContext("2d");
            var cw = canvas.width;
            var ch = canvas.height;
            var myImageData, rotating = false;
    if (!rotating) {

        rotating = true;            
        // store current data to an image
        myImageData = new Image();
        myImageData.src = canvas.toDataURL();

       myImageData.onload = function () {
            // reset the canvas with new dimensions
            canvas.width = ch;
            canvas.height = cw;
            cw = canvas.width;
            ch = canvas.height;

            context.save();
            // translate and rotate
            context.translate(cw, ch / cw);
            context.rotate(Math.PI / 2);
            // draw the previows image, now rotated
            context.drawImage(myImageData, 0, 0);               
            context.restore();

            // clear the temporary image
            myImageData = null;

            rotating = false;               
        }
    }
}
    </script>
</body>

</html>